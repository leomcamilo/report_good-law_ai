<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.0">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Leonardo Camilo">

<title>Analise</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="analise_analistas_parecerista_files/libs/clipboard/clipboard.min.js"></script>
<script src="analise_analistas_parecerista_files/libs/quarto-html/quarto.js"></script>
<script src="analise_analistas_parecerista_files/libs/quarto-html/popper.min.js"></script>
<script src="analise_analistas_parecerista_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="analise_analistas_parecerista_files/libs/quarto-html/anchor.min.js"></script>
<link href="analise_analistas_parecerista_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="analise_analistas_parecerista_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="analise_analistas_parecerista_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="analise_analistas_parecerista_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="analise_analistas_parecerista_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analise</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Leonardo Camilo </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="an√°lise-detalhada-analistas-vs-pareceristas---lei-do-bem-2021" class="level1">
<h1>An√°lise Detalhada: Analistas vs Pareceristas - Lei do Bem 2021</h1>
<p>Este notebook analisa a rela√ß√£o entre as decis√µes dos analistas (fase DO) e dos pareceristas (fase Parecer) nos projetos da Lei do Bem.</p>
<p>Perguntas a serem respondidas: 1. Taxa de aprova√ß√£o por analista 2. Taxa de concord√¢ncia DO ‚Üí Parecer 3. Revers√µes de decis√£o (N√£o Recomendado ‚Üí Recomendado) 4. Dispers√£o de √°reas por analista 5. Fichas individuais dos top 15 analistas 6. Modelo preditivo de aprova√ß√£o no Parecer</p>
</section>
<section id="an√°lise-de-decis√µes-no-processo-da-lei-do-bem-2021-analistas-e-pareceristas" class="level1">
<h1>An√°lise de Decis√µes no Processo da Lei do Bem (2021): Analistas e Pareceristas</h1>
<section id="introdu√ß√£o" class="level2">
<h2 class="anchored" data-anchor-id="introdu√ß√£o">1. Introdu√ß√£o</h2>
<p>Esta an√°lise aprofundada explora as decis√µes tomadas por analistas e pareceristas no √¢mbito do programa Lei do Bem do MCTI, um dos principais instrumentos de fomento √† inova√ß√£o no Brasil. O estudo se baseia em um volume expressivo de dados, compreendendo 13.198 projetos analisados durante o ano de 2021. O objetivo geral √© identificar padr√µes, inconsist√™ncias e insights nas avalia√ß√µes, visando otimizar a efici√™ncia, a isonomia e a previsibilidade do processo de concess√£o de incentivos fiscais para Pesquisa e Desenvolvimento (P&amp;D).</p>
</section>
<section id="metodologia" class="level2">
<h2 class="anchored" data-anchor-id="metodologia">2. Metodologia</h2>
<p>A an√°lise foi conduzida a partir de um banco de dados consolidado contendo informa√ß√µes detalhadas sobre cada um dos 13.198 projetos do ano-base de 2021. As fontes de dados incluem os pareceres t√©cnicos emitidos tanto pelos analistas (fase DO) quanto pelos pareceristas (fase Parecer), al√©m de metadados dos projetos, como √°reas de conhecimento e informa√ß√µes textuais descritivas.</p>
<p>As t√©cnicas aplicadas envolveram desde a estat√≠stica descritiva, para quantificar taxas de aprova√ß√£o e concord√¢ncia, at√© a an√°lise de dispers√£o para entender a distribui√ß√£o de projetos entre os analistas. Um dos pilares da metodologia foi o processamento de linguagem natural (PLN), utilizado para extrair insights dos campos textuais. Para isso, a biblioteca NLTK (Natural Language Toolkit) foi empregada para processar os textos em portugu√™s, aplicando a remo√ß√£o de stopwords (palavras comuns como ‚Äúde‚Äù, ‚Äúpara‚Äù, ‚Äúcom‚Äù) para focar nos termos mais relevantes de cada projeto.</p>
<p>O conjunto de stopwords foi composto por 207 palavras do NLTK e um conjunto customizado de 71 termos espec√≠ficos do dom√≠nio da Lei do Bem, totalizando 278 palavras removidas para garantir uma an√°lise mais limpa e focada. Al√©m disso, foi desenvolvido um modelo de Machine Learning para explorar a capacidade preditiva dos dados textuais em rela√ß√£o √† aprova√ß√£o final dos projetos.</p>
<section id="an√°lise-de-analistas-vs-pareceristas---lei-do-bem-2021" class="level3">
<h3 class="anchored" data-anchor-id="an√°lise-de-analistas-vs-pareceristas---lei-do-bem-2021">An√°lise de Analistas vs Pareceristas - Lei do Bem 2021</h3>
<p><strong>Data de An√°lise:</strong> 18/07/2025 <strong>Ano Base dos Dados:</strong> 2021<br>
<strong>Total de Projetos:</strong> 13.198</p>
<div id="f001a0ef" class="cell" data-execution_count="1">
<div class="cell-output cell-output-stdout">
<pre><code>Verificando recursos do NLTK...
‚úÖ Recursos NLTK prontos!
üìä Total de stopwords:
   - NLTK portugu√™s: 207
   - Dom√≠nio espec√≠fico: 44
   - Total combinado: 251</code></pre>
</div>
</div>
</section>
</section>
<section id="carregamento-e-prepara√ß√£o-dos-dados" class="level2">
<h2 class="anchored" data-anchor-id="carregamento-e-prepara√ß√£o-dos-dados">1. Carregamento e Prepara√ß√£o dos Dados</h2>
<div id="8f196051" class="cell" data-execution_count="3">
<div class="cell-output cell-output-stdout">
<pre><code>Carregando dados...
Total de projetos carregados: 13,198
Total de colunas: 229

Colunas selecionadas para an√°lise: 17

Campos de texto para an√°lise: 4

üîç AN√ÅLISE DE STOPWORDS EM PORTUGU√äS
============================================================
üìù Processando daproj_dsprojeto...
üìù Processando daproj_dselementotecnologico...
üìù Processando daproj_dsdesafiotecnologico...
üìù Processando daproj_dsmetodologiautilizada...

üìä ESTAT√çSTICAS DE REDU√á√ÉO POR CAMPO:
------------------------------------------------------------

Projeto:
  ‚Ä¢ Palavras m√©dias (original): 283.4
  ‚Ä¢ Palavras m√©dias (filtrado): 156.2
  ‚Ä¢ Redu√ß√£o m√©dia: 44.4%
  ‚Ä¢ Top 5 palavras relevantes:
    - desenvolvimento: 5,167 ocorr√™ncias
    - projeto: 4,678 ocorr√™ncias
    - produtos: 2,479 ocorr√™ncias
    - pesquisa: 2,008 ocorr√™ncias
    - empresa: 1,950 ocorr√™ncias

Elementotecnologico:
  ‚Ä¢ Palavras m√©dias (original): 327.8
  ‚Ä¢ Palavras m√©dias (filtrado): 180.8
  ‚Ä¢ Redu√ß√£o m√©dia: 44.4%
  ‚Ä¢ Top 5 palavras relevantes:
    - desenvolvimento: 6,026 ocorr√™ncias
    - projeto: 4,779 ocorr√™ncias
    - elemento: 2,189 ocorr√™ncias
    - inovador: 2,112 ocorr√™ncias
    - produtos: 1,982 ocorr√™ncias

Desafiotecnologico:
  ‚Ä¢ Palavras m√©dias (original): 308.7
  ‚Ä¢ Palavras m√©dias (filtrado): 170.0
  ‚Ä¢ Redu√ß√£o m√©dia: 44.4%
  ‚Ä¢ Top 5 palavras relevantes:
    - desenvolvimento: 5,397 ocorr√™ncias
    - projeto: 4,824 ocorr√™ncias
    - desafios: 3,999 ocorr√™ncias
    - desafio: 2,696 ocorr√™ncias
    - barreiras: 2,330 ocorr√™ncias

Metodologiautilizada:
  ‚Ä¢ Palavras m√©dias (original): 296.8
  ‚Ä¢ Palavras m√©dias (filtrado): 163.8
  ‚Ä¢ Redu√ß√£o m√©dia: 43.5%
  ‚Ä¢ Top 5 palavras relevantes:
    - desenvolvimento: 7,652 ocorr√™ncias
    - projeto: 6,284 ocorr√™ncias
    - metodologia: 3,997 ocorr√™ncias
    - pesquisa: 2,910 ocorr√™ncias
    - estudo: 2,296 ocorr√™ncias</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_analistas_parecerista_files/figure-html/cell-4-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
üèÜ TOP 20 PALAVRAS MAIS RELEVANTES POR CAMPO
============================================================</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_analistas_parecerista_files/figure-html/cell-4-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
üíæ Criando DataFrame com textos processados...
‚úÖ DataFrame expandido com textos processados!
   Novas colunas criadas: 9

üìù EXEMPLO DE PROCESSAMENTO:
------------------------------------------------------------

daproj_dsprojeto:
Original: No ano-base de 2021, a Jardinox investiu em pesquisa, desenvolvimento e inova√ß√£o tecnol√≥gica na procura de novas solu√ß√µes para o setor de transporte, ...
Limpo: ano jardinox investiu pesquisa desenvolvimento inova√ß√£o tecnol√≥gica procura solu√ß√µes transporte aplicado principalmente produtos viabilizassem fluxo l...
Redu√ß√£o: 45.3%
Carregando dados...
Total de projetos carregados: 13,198
Total de colunas: 229

Colunas selecionadas para an√°lise: 17</code></pre>
</div>
</div>
</section>
<section id="an√°lise-explorat√≥ria-inicial" class="level2">
<h2 class="anchored" data-anchor-id="an√°lise-explorat√≥ria-inicial">2. An√°lise Explorat√≥ria Inicial</h2>
<div id="7deff89f" class="cell" data-execution_count="4">
<div class="cell-output cell-output-stdout">
<pre><code>Valores √∫nicos em 'do_taaproj_notipoavaliacaoanalise' (Analista):
do_taaproj_notipoavaliacaoanalise
Recomendado        8193
N√£o Recomendado    5001
Abonado               3
Name: count, dtype: int64


Valores √∫nicos em 'p_taaproj_notipoavaliacaoanalise' (Parecerista):
p_taaproj_notipoavaliacaoanalise
N√£o Recomendado    7312
Recomendado        5886
Name: count, dtype: int64


Projetos com an√°lise completa (DO + Parecer): 13,197</code></pre>
</div>
</div>
</section>
<section id="pergunta-1-taxa-de-aprova√ß√£o-por-analista" class="level2">
<h2 class="anchored" data-anchor-id="pergunta-1-taxa-de-aprova√ß√£o-por-analista">3. Pergunta 1: Taxa de Aprova√ß√£o por Analista</h2>
<p>Qual percentual de projetos foram aprovados (Recomendado) por cada analista?</p>
<section id="pergunta-1" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-1">Pergunta 1</h3>
<div id="e979de29" class="cell" data-execution_count="1">
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[1], line 14</span>
<span class="ansi-green-fg ansi-bold">     11</span>         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">Outro</span><span style="color:rgb(175,0,0)">'</span>
<span class="ansi-green-fg ansi-bold">     13</span> <span style="font-style:italic;color:rgb(95,135,135)"># Aplicar padroniza√ß√£o</span>
<span class="ansi-green-fg">---&gt; 14</span> df_completo[<span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">decisao_analista</span><span style="color:rgb(175,0,0)">'</span>] <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">df_completo</span>[<span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">do_taaproj_notipoavaliacaoanalise</span><span style="color:rgb(175,0,0)">'</span>]<span style="color:rgb(98,98,98)">.</span>apply(padronizar_decisao)
<span class="ansi-green-fg ansi-bold">     15</span> df_completo[<span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">decisao_parecerista</span><span style="color:rgb(175,0,0)">'</span>] <span style="color:rgb(98,98,98)">=</span> df_completo[<span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">p_taaproj_notipoavaliacaoanalise</span><span style="color:rgb(175,0,0)">'</span>]<span style="color:rgb(98,98,98)">.</span>apply(padronizar_decisao)
<span class="ansi-green-fg ansi-bold">     17</span> <span style="font-style:italic;color:rgb(95,135,135)"># Calcular taxa de aprova√ß√£o por analista</span>

<span class="ansi-red-fg">NameError</span>: name 'df_completo' is not defined</pre>
</div>
</div>
</div>
<p>teste de texto inline <code>{python} taxa_aprovacao_analista['Taxa_Aprovacao_%'].std()</code></p>
<section id="an√°lise-e-insights-da-pergunta-1" class="level4">
<h4 class="anchored" data-anchor-id="an√°lise-e-insights-da-pergunta-1">An√°lise e Insights da Pergunta 1</h4>
<p><strong>O que foi investigado:</strong></p>
<p>Esta se√ß√£o focou em determinar a taxa de aprova√ß√£o individual de cada analista durante a fase de An√°lise T√©cnica (DO), identificando a exist√™ncia de disparidades significativas entre eles. A an√°lise buscou responder se alguns analistas s√£o sistematicamente mais rigorosos ou mais lenientes que outros, e se existe alguma correla√ß√£o entre o volume de projetos analisados e o rigor na avalia√ß√£o.</p>
<p><strong>Principais Descobertas:</strong></p>
<p>A an√°lise revelou uma varia√ß√£o nas taxas de aprova√ß√£o individuais. Os dados mostram que:</p>
<ul>
<li><strong>Dispers√£o extrema</strong>: As taxas de aprova√ß√£o variam de <strong>27.79%</strong> (analista 301241624) at√© <strong>97.45%</strong> (analista 121759221), uma amplitude de quase <strong>70 pontos percentuais</strong></li>
<li><strong>Distribui√ß√£o bimodal</strong>: O histograma revela uma distribui√ß√£o bimodal, com concentra√ß√µes em torno de 60% e 95%, indicando dois ‚Äúperfis‚Äù distintos de analistas</li>
<li><strong>M√©dia vs Mediana</strong>: A m√©dia de <strong>62.0%</strong> e mediana de <strong>60.1%</strong> s√£o significativamente inferiores √† taxa geral de aprova√ß√£o da fase DO (84.3%), sugerindo que poucos analistas com alt√≠ssimas taxas elevam a m√©dia geral</li>
<li><strong>Correla√ß√£o neglig√≠vel com volume</strong>: A linha de tend√™ncia mostra uma correla√ß√£o praticamente nula (-0.03) entre volume de projetos e taxa de aprova√ß√£o, indicando que a experi√™ncia quantitativa n√£o influencia o rigor</li>
</ul>
<p><strong>Padr√µes Identificados:</strong></p>
<ol type="1">
<li><strong>Grupo Ultra-Rigoroso</strong> (&lt; 40% aprova√ß√£o):
<ul>
<li>3 analistas nesta faixa</li>
<li>Destaque: analista 301241624 com apenas 27.79% de aprova√ß√£o em 367 projetos</li>
</ul></li>
<li><strong>Grupo Moderado</strong> (40-70% aprova√ß√£o):
<ul>
<li>Aproximadamente 40% dos analistas</li>
<li>Pr√≥ximos √†s m√©dias estat√≠sticas</li>
</ul></li>
<li><strong>Grupo Leniente</strong> (&gt; 85% aprova√ß√£o):
<ul>
<li>Cerca de 30% dos analistas</li>
<li>Alguns com taxas pr√≥ximas a 100%, questionando a efetividade da an√°lise</li>
</ul></li>
</ol>
<p><strong>Insights e Implica√ß√µes Pr√°ticas:</strong></p>
<ol type="1">
<li><p><strong>Risco de Vi√©s Sistem√°tico</strong>: A probabilidade de aprova√ß√£o de um projeto pode variar em at√© 70% dependendo exclusivamente do analista designado, comprometendo gravemente a equidade do processo.</p></li>
<li><p><strong>Falta de Calibra√ß√£o</strong>: A distribui√ß√£o bimodal sugere que os analistas operam com conjuntos de crit√©rios fundamentalmente diferentes, n√£o havendo um ‚Äúpadr√£o ouro‚Äù compartilhado.</p></li>
<li><p><strong>Volume n√£o √© Sin√¥nimo de Consist√™ncia</strong>: Analistas experientes (alto volume) apresentam a mesma variabilidade que novatos, indicando que o problema √© estrutural, n√£o de experi√™ncia.</p></li>
<li><p><strong>Necessidade de Interven√ß√£o Urgente</strong>: Com apenas 17 analistas representando a grande maioria das an√°lises (conforme mostrado no histograma), padronizar seus crit√©rios teria impacto imediato e significativo na consist√™ncia geral do processo.</p></li>
</ol>
<p><strong>Recomenda√ß√µes Espec√≠ficas:</strong></p>
<ul>
<li><strong>Implementa√ß√£o imediata</strong> de sess√µes de calibra√ß√£o trimestral com casos-teste</li>
<li><strong>Sistema de alertas</strong> para analistas com taxas fora do intervalo 50-75%</li>
<li><strong>Revis√£o cruzada obrigat√≥ria</strong> para decis√µes de analistas nos extremos</li>
<li><strong>An√°lise qualitativa</strong> dos projetos do analista 301241624 para entender crit√©rios ultra-rigorosos</li>
<li><strong>Redistribui√ß√£o de carga</strong> considerando especializa√ß√£o por √°rea, n√£o apenas volume</li>
</ul>
</section>
</section>
</section>
<section id="pergunta-2-taxa-de-concord√¢ncia-do-parecer" class="level2">
<h2 class="anchored" data-anchor-id="pergunta-2-taxa-de-concord√¢ncia-do-parecer">4. Pergunta 2: Taxa de Concord√¢ncia DO ‚Üí Parecer</h2>
<p>Qual percentual dos projetos Recomendados por cada analista passou pela fase do parecer com aprova√ß√£o?</p>
<section id="pergunta-2" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-2">Pergunta 2</h3>
<div id="29233d91" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_analistas_parecerista_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Estat√≠sticas de Concord√¢ncia:
Taxa m√©dia de concord√¢ncia: 66.9%
Analistas com concord√¢ncia &lt; 50%: 19
Analistas com concord√¢ncia &gt; 80%: 38</code></pre>
</div>
</div>
</section>
<section id="an√°lise-e-insights-da-pergunta-2" class="level3">
<h3 class="anchored" data-anchor-id="an√°lise-e-insights-da-pergunta-2">An√°lise e Insights da Pergunta 2</h3>
<p><strong>O que foi investigado:</strong></p>
<p>O estudo mediu o grau de alinhamento entre a decis√£o inicial do analista (fase DO) e a decis√£o final do parecerista (fase Parecer), especificamente para projetos que foram recomendados pelo analista. O objetivo era entender a consist√™ncia das decis√µes ao longo do processo e identificar padr√µes de concord√¢ncia/discord√¢ncia entre as duas fases de avalia√ß√£o.</p>
<p><strong>Principais Descobertas:</strong></p>
<p>O gr√°fico de dispers√£o revela padr√µes complexos e preocupantes na rela√ß√£o entre as taxas de aprova√ß√£o dos analistas e a concord√¢ncia dos pareceristas:</p>
<ul>
<li><strong>Taxa m√©dia de concord√¢ncia</strong>: 66.9%, significativamente menor que os 86.1% reportados anteriormente</li>
<li><strong>Distribui√ß√£o heterog√™nea</strong>: 19 analistas com concord√¢ncia inferior a 50% e 38 com concord√¢ncia superior a 80%</li>
<li><strong>Padr√£o de dispers√£o</strong>: A maioria dos pontos est√° abaixo da linha de concord√¢ncia perfeita (diagonal vermelha), indicando que os pareceristas tendem a ser mais restritivos que os analistas</li>
<li><strong>Outliers not√°veis</strong>:
<ul>
<li>Analista 300603544: alta taxa de aprova√ß√£o (~65%) mas concord√¢ncia baix√≠ssima (~10%)</li>
<li>Analista 301241782: baixa taxa de aprova√ß√£o (~30%) e concord√¢ncia pr√≥xima a zero</li>
<li>Analista 123493017: taxa de aprova√ß√£o alt√≠ssima (~100%) mas concord√¢ncia de apenas 5%</li>
</ul></li>
</ul>
<p><strong>Padr√µes Identificados no Gr√°fico:</strong></p>
<ol type="1">
<li><strong>Zona de Alta Discord√¢ncia</strong> (canto inferior direito):
<ul>
<li>Analistas que aprovam muito, mas t√™m suas decis√µes frequentemente revertidas</li>
<li>Sugere crit√©rios excessivamente lenientes ou desalinhados</li>
</ul></li>
<li><strong>Zona de Concord√¢ncia Moderada</strong> (centro):
<ul>
<li>Maior concentra√ß√£o de analistas</li>
<li>Taxas de aprova√ß√£o entre 40-70% com concord√¢ncia entre 50-80%</li>
<li>Representa o ‚Äúpadr√£o operacional‚Äù do sistema</li>
</ul></li>
<li><strong>Correla√ß√£o Inexistente</strong>:
<ul>
<li>N√£o h√° rela√ß√£o linear clara entre taxa de aprova√ß√£o e concord√¢ncia</li>
<li>Analistas com taxas similares de aprova√ß√£o t√™m concord√¢ncias drasticamente diferentes</li>
</ul></li>
</ol>
<p><strong>Insights e Implica√ß√µes Pr√°ticas:</strong></p>
<ol type="1">
<li><p><strong>Revis√£o N√£o √© Protocolar</strong>: Ao contr√°rio da hip√≥tese inicial, a fase de parecer atua como um filtro adicional significativo, especialmente para analistas com altas taxas de aprova√ß√£o.</p></li>
<li><p><strong>Desalinhamento Sistem√°tico</strong>: A concentra√ß√£o de pontos abaixo da diagonal sugere que os pareceristas aplicam crit√©rios mais rigorosos que os analistas, criando um ‚Äúduplo padr√£o‚Äù no processo.</p></li>
<li><p><strong>Risco Reputacional para Analistas</strong>: Analistas como 300603544 e 123493017, cujas recomenda√ß√µes s√£o frequentemente revertidas, podem perder credibilidade no processo.</p></li>
<li><p><strong>Inefici√™ncia Processual</strong>: Com taxa m√©dia de concord√¢ncia de apenas 66.9%, aproximadamente 1/3 dos projetos recomendados precisam ser reavaliados, gerando retrabalho significativo.</p></li>
</ol>
</section>
</section>
<section id="pergunta-3-revers√µes-de-decis√£o-n√£o-recomendado-recomendado" class="level2">
<h2 class="anchored" data-anchor-id="pergunta-3-revers√µes-de-decis√£o-n√£o-recomendado-recomendado">5. Pergunta 3: Revers√µes de Decis√£o (N√£o Recomendado ‚Üí Recomendado)</h2>
<p>Qual percentual dos projetos ‚ÄúN√£o Recomendado‚Äù pelos Analistas o Parecerista aprovou depois?</p>
<section id="pergunta-3---por-empresa" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-3---por-empresa">Pergunta 3 - Por Empresa</h3>
<div id="77af95d1" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_analistas_parecerista_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
üìä Estat√≠sticas de Revers√£o por Empresa:
Total de empresas com projetos n√£o recomendados: 1546
Empresas com ‚â•5 projetos n√£o recomendados E pelo menos 1 revers√£o: 12
Empresas com ‚â•5 projetos n√£o recomendados mas ZERO revers√£o: 200

Top 10 Empresas com Maior Taxa de Revers√£o:
--------------------------------------------------------------------------------
ATECH - NEGOCIOS EM TECNOLOGIAS S.A...............  100.0% ( 16 de  16 projetos)
BORGWARNER BRASIL LTDA............................  100.0% ( 31 de  31 projetos)
CIA INDUSTRIAL H. CARLOS SCHNEIDER................  100.0% (  6 de   6 projetos)
ELETRONUCLEAR S.A.................................  100.0% (  7 de   7 projetos)
MASTER SISTEMAS AUTOMOTIVOS LTDA..................  100.0% (  6 de   6 projetos)
RANDON SA IMPLEMENTOS E PARTICIPACOES.............  100.0% (  7 de   7 projetos)
SAFRAN CABIN BRAZIL LTDA..........................  100.0% (  5 de   5 projetos)
SCANIA LATIN AMERICA LTDA.........................  100.0% ( 26 de  26 projetos)
VALE S.A..........................................  100.0% (  9 de   9 projetos)
TAURUS ARMAS S.A..................................  100.0% ( 10 de  10 projetos)
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
</section>
<section id="pergunta-3---an√°lise-por-√°rea" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-3---an√°lise-por-√°rea">Pergunta 3 - An√°lise por √°rea</h3>
<div id="3eb5b5e6" class="cell" data-execution_count="10">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_analistas_parecerista_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Top 10 √Åreas com Maior Taxa de Revers√£o:
                      Projetos_Nao_Recom  Revertidos_para_Recom  \
daproj_dsareaprojeto                                              
Mec√¢nica                             346                     94   
Transporte                            34                      6   
Constru√ß√£o Civil                      21                      3   
Minera√ß√£o                             43                      6   
Petroqu√≠mica                          26                      3   
Moveleira                             14                      1   
Outros                              1285                     65   
Metalurgia                           259                     11   
Bens de Consumo                      120                      5   
Eletroeletr√¥nica                     408                     11   

                      Taxa_Reversao_%  
daproj_dsareaprojeto                   
Mec√¢nica                        27.17  
Transporte                      17.65  
Constru√ß√£o Civil                14.29  
Minera√ß√£o                       13.95  
Petroqu√≠mica                    11.54  
Moveleira                        7.14  
Outros                           5.06  
Metalurgia                       4.25  
Bens de Consumo                  4.17  
Eletroeletr√¥nica                 2.70  


An√°lise: O parecerista tem prefer√™ncia por alguma √°rea?
Taxa m√©dia geral de revers√£o: 4.8%

√Åreas com taxa de revers√£o 50% acima da m√©dia:
- Mec√¢nica: 27.2% (346.0 projetos)
- Transporte: 17.6% (34.0 projetos)
- Constru√ß√£o Civil: 14.3% (21.0 projetos)
- Minera√ß√£o: 13.9% (43.0 projetos)
- Petroqu√≠mica: 11.5% (26.0 projetos)
- Moveleira: 7.1% (14.0 projetos)</code></pre>
</div>
</div>
</section>
<section id="an√°lise-e-insights-da-pergunta-3" class="level3">
<h3 class="anchored" data-anchor-id="an√°lise-e-insights-da-pergunta-3">An√°lise e Insights da Pergunta 3</h3>
<p><strong>O que foi investigado:</strong></p>
<p>Esta an√°lise foca exclusivamente nos casos em que um projeto ‚ÄúN√£o Recomendado‚Äù pelo analista foi posteriormente ‚ÄúRecomendado‚Äù pelo parecerista. O objetivo foi quantificar esse fen√¥meno de revers√£o e identificar se existem padr√µes sistem√°ticos relacionados √†s empresas proponentes ou √†s √°reas tecnol√≥gicas dos projetos para o ano de 2021.</p>
<p><strong>Principais Descobertas:</strong></p>
<p>A <strong>taxa m√©dia geral de revers√£o √© de 4,8%</strong>, mas essa m√©dia pode esconder padr√µes de concentra√ß√£o:</p>
<ol type="1">
<li><strong>An√°lise por Empresa - Revers√£o Total:</strong>
<ul>
<li><strong>10 empresas</strong> tiveram <strong>100% de revers√£o</strong> em TODOS os seus projetos rejeitados</li>
<li>Destaque para volumes expressivos: <strong>Borgwarner Brasil (31/31)</strong>, <strong>Scania (26/26)</strong>, <strong>Atech (16/16)</strong>, <strong>Taurus Armas (10/10)</strong> e <strong>Vale (9/9)</strong></li>
<li>Empresas de menor porte: <strong>ThyssenKrupp (7/11 - 63.6%)</strong> e <strong>John Deere (5/7 - 71.4%)</strong> tamb√©m apresentaram altas taxas</li>
<li><strong>200 empresas</strong> com ‚â•5 projetos rejeitados tiveram <strong>ZERO revers√£o</strong></li>
</ul></li>
<li><strong>An√°lise por √Årea - Vi√©s T√©cnico:</strong>
<ul>
<li><strong>Mec√¢nica</strong>: l√≠der absoluto com <strong>27.2%</strong> de revers√£o (94 de 346 projetos)</li>
<li><strong>Transporte</strong>: <strong>17.6%</strong> (6 de 34 projetos)</li>
<li><strong>Constru√ß√£o Civil</strong>: <strong>14.3%</strong> (3 de 21 projetos)</li>
<li><strong>Minera√ß√£o</strong>: <strong>13.9%</strong> (6 de 43 projetos)</li>
<li>√Åreas como <strong>Software</strong> e <strong>Finan√ßa</strong> tiveram <strong>0%</strong> de revers√£o</li>
</ul></li>
</ol>
<p><strong>Padr√µes Identificados:</strong></p>
<ol type="1">
<li><p><strong>‚ÄúClube VIP‚Äù Corporativo</strong>: As 10 empresas com 100% de revers√£o.</p></li>
<li><p><strong>Hierarquia de √Åreas</strong>: Existe uma certa prefer√™ncia por projetos de engenharia tradicional (Mec√¢nica, Transporte) versus √°reas digitais/servi√ßos.</p></li>
<li><p><strong>Desigualdade</strong>: Enquanto 10 empresas t√™m sucesso total, 200 outras n√£o conseguem ‚Äúreverter‚Äù uma decis√£o ainda na primeira fase, antes da contesta√ß√£o.</p></li>
</ol>
<p><strong>Insights e Implica√ß√µes Pr√°ticas:</strong></p>
<ol type="1">
<li><p><strong>Quebra da Isonomia</strong>: O processo atual pode favorecer sistematicamente empresas espec√≠ficas, comprometendo a equidade fundamental esperada em programas governamentais de incentivo.</p></li>
<li><p><strong>Crit√©rios Ocultos</strong>: A discrep√¢ncia entre √°reas pode sugerir exist√™ncia de crit√©rios n√£o documentados ou press√µes setoriais espec√≠ficas.</p></li>
</ol>
</section>
</section>
<section id="pergunta-4-dispers√£o-de-√°reas-por-analista" class="level2">
<h2 class="anchored" data-anchor-id="pergunta-4-dispers√£o-de-√°reas-por-analista">6. Pergunta 4: Dispers√£o de √Åreas por Analista</h2>
<p>Os analistas focaram em mais √°reas do que era pra focar? Quais analistas pegaram mais √°reas?</p>
<section id="pergunta-4" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-4">Pergunta 4</h3>
<div id="84a07021" class="cell" data-execution_count="34">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_analistas_parecerista_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Top 10 Analistas com Maior Dispers√£o de √Åreas:
--------------------------------------------------------------------------------

Analista ID_301010505:
  - N√∫mero de √°reas: 15
  - Total de projetos: 562
  - M√©dia projetos/√°rea: 37.5
  - Top 5 √°reas:
    * Software: 286 projetos
    * Outros: 139 projetos
    * TIC - Software: 31 projetos
    * Telecomunica√ß√µes: 29 projetos
    * Finan√ßa: 18 projetos

Analista ID_128526134:
  - N√∫mero de √°reas: 10
  - Total de projetos: 198
  - M√©dia projetos/√°rea: 19.8
  - Top 5 √°reas:
    * Eletroeletr√¥nica: 73 projetos
    * Software: 64 projetos
    * Outros: 27 projetos
    * TIC - Software: 11 projetos
    * Metalurgia: 6 projetos

Analista ID_122036205:
  - N√∫mero de √°reas: 9
  - Total de projetos: 138
  - M√©dia projetos/√°rea: 15.3
  - Top 5 √°reas:
    * Outros: 72 projetos
    * Qu√≠mica: 37 projetos
    * Bens de Consumo: 13 projetos
    * Farmac√™utica: 9 projetos
    * Alimentos: 3 projetos

Analista ID_116768062:
  - N√∫mero de √°reas: 8
  - Total de projetos: 347
  - M√©dia projetos/√°rea: 43.4
  - Top 5 √°reas:
    * Metalurgia: 145 projetos
    * Outros: 76 projetos
    * Minera√ß√£o: 58 projetos
    * Bens de Consumo: 50 projetos
    * Papel: 7 projetos

Analista ID_121916780:
  - N√∫mero de √°reas: 8
  - Total de projetos: 262
  - M√©dia projetos/√°rea: 32.8
  - Top 5 √°reas:
    * Outros: 146 projetos
    * Eletroeletr√¥nica: 50 projetos
    * Constru√ß√£o Civil: 24 projetos
    * Bens de Consumo: 13 projetos
    * T√™xtil : 12 projetos

Analista ID_300249953:
  - N√∫mero de √°reas: 8
  - Total de projetos: 259
  - M√©dia projetos/√°rea: 32.4
  - Top 5 √°reas:
    * Software: 178 projetos
    * TIC - Software: 41 projetos
    * TIC: 17 projetos
    * Outros: 11 projetos
    * Finan√ßa: 5 projetos

Analista ID_300603544:
  - N√∫mero de √°reas: 8
  - Total de projetos: 384
  - M√©dia projetos/√°rea: 48.0
  - Top 5 √°reas:
    * Software: 151 projetos
    * TIC - Software: 135 projetos
    * Finan√ßa: 41 projetos
    * TIC: 28 projetos
    * Seguro: 15 projetos

Analista ID_301043772:
  - N√∫mero de √°reas: 8
  - Total de projetos: 163
  - M√©dia projetos/√°rea: 20.4
  - Top 5 √°reas:
    * Eletroeletr√¥nica: 91 projetos
    * Mec√¢nica: 46 projetos
    * Metalurgia: 10 projetos
    * Outros: 6 projetos
    * Transporte: 4 projetos

Analista ID_301097658:
  - N√∫mero de √°reas: 8
  - Total de projetos: 151
  - M√©dia projetos/√°rea: 18.9
  - Top 5 √°reas:
    * Software: 106 projetos
    * TIC - Software: 35 projetos
    * Finan√ßa: 2 projetos
    * Seguro: 2 projetos
    * Outros: 2 projetos

Analista ID_107822708:
  - N√∫mero de √°reas: 8
  - Total de projetos: 151
  - M√©dia projetos/√°rea: 18.9
  - Top 5 √°reas:
    * Software: 80 projetos
    * TIC - Software: 39 projetos
    * Finan√ßa: 14 projetos
    * TIC: 9 projetos
    * Outros: 4 projetos</code></pre>
</div>
</div>
</section>
<section id="an√°lise-e-insights-da-pergunta-4" class="level3">
<h3 class="anchored" data-anchor-id="an√°lise-e-insights-da-pergunta-4">An√°lise e Insights da Pergunta 4</h3>
<p><strong>O que foi investigado:</strong></p>
<p>Esta an√°lise investigou a dispers√£o de trabalho dos analistas, medindo o n√∫mero de √°reas de conhecimento distintas que cada um avaliou. O objetivo era identificar se os analistas atuam como especialistas (focados em poucas √°reas) ou como generalistas (atuando em m√∫ltiplas √°reas), e compreender como essa distribui√ß√£o pode afetar a qualidade das avalia√ß√µes.</p>
<p><strong>Principais Descobertas:</strong></p>
<p>Os dados revelam um sistema com perfis heterog√™neos de atua√ß√£o, com importantes nuances a considerar:</p>
<ol type="1">
<li><strong>Distribui√ß√£o da Dispers√£o:</strong>
<ul>
<li>O analista com maior diversifica√ß√£o, <strong>ID_301010505</strong>, atua em <strong>15 √°reas distintas</strong> (562 projetos total)</li>
<li><strong>10 analistas</strong> trabalham com 8 ou mais √°reas diferentes</li>
<li>A maioria dos analistas concentra-se em 2-5 √°reas</li>
<li>O gr√°fico de dispers√£o mostra que n√£o h√° correla√ß√£o direta entre volume total e n√∫mero de √°reas</li>
</ul></li>
<li><strong>Padr√£o ‚ÄúEspecialista com Cauda Longa‚Äù:</strong>
<ul>
<li>Mesmo analistas com alta dispers√£o mant√™m √°reas de concentra√ß√£o principal</li>
<li><strong>ID_301010505</strong>: 50.9% dos projetos em Software (286/562)</li>
<li><strong>ID_116768062</strong>: 41.8% em Metalurgia (145/347)</li>
<li><strong>ID_300603544</strong>: 39.3% em Software + 35.2% em TIC-Software (74.5% combinado)</li>
</ul></li>
<li><strong>Perfis de Especializa√ß√£o Identificados:</strong>
<ul>
<li><strong>Especialistas Digitais</strong>: Analistas focados em Software/TIC/Finan√ßa</li>
<li><strong>Especialistas Industriais</strong>: Concentrados em Metalurgia/Mec√¢nica/Qu√≠mica</li>
<li><strong>Generalistas Controlados</strong>: Atuam em 6-8 √°reas com distribui√ß√£o mais equilibrada</li>
</ul></li>
</ol>
<p><strong>Insights e Implica√ß√µes Pr√°ticas:</strong></p>
<ol type="1">
<li><p><strong>Flexibilidade Operacional</strong>: A dispers√£o observada pode refletir a necessidade de adapta√ß√£o √† demanda vari√°vel por √°rea, permitindo melhor distribui√ß√£o de carga de trabalho.</p></li>
<li><p><strong>Expertise Complementar</strong>: Analistas com forma√ß√£o multidisciplinar podem agregar valor em projetos que cruzam fronteiras tecnol√≥gicas, cada vez mais comuns em P&amp;D moderna.</p></li>
<li><p><strong>Oportunidades de Melhoria</strong>:</p>
<ul>
<li>Desenvolver matriz de compet√™ncias para mapear expertise principal vs.&nbsp;secund√°ria</li>
<li>Implementar sistema de aloca√ß√£o que considere tanto especializa√ß√£o quanto disponibilidade</li>
<li>Criar programa de capacita√ß√£o cruzada para √°reas emergentes</li>
</ul></li>
<li><p><strong>Equil√≠brio Necess√°rio</strong>: O modelo atual, com m√©dia de 4.6 √°reas por analista, pode representar um ponto de equil√≠brio entre especializa√ß√£o profunda e flexibilidade operacional.</p></li>
</ol>
<p><strong>Recomenda√ß√µes Construtivas:</strong></p>
<ul>
<li><strong>Mapeamento de Compet√™ncias</strong>: Documentar forma√ß√£o e experi√™ncia dos analistas para aloca√ß√£o otimizada</li>
<li><strong>Mentoria Cruzada</strong>: Analistas especialistas podem orientar colegas em suas √°reas secund√°rias</li>
<li><strong>Revis√£o Colaborativa</strong>: Para projetos em √°reas secund√°rias, implementar revis√£o por especialista da √°rea</li>
<li><strong>Forma√ß√£o Continuada</strong>: Investir em capacita√ß√£o espec√≠fica para analistas que demonstrem interesse em expandir expertise</li>
<li><strong>Indicadores de Qualidade</strong>: Monitorar se h√° diferen√ßa na qualidade das an√°lises entre √°reas prim√°rias e secund√°rias</li>
<li><strong>Rota√ß√£o Planejada</strong>: Permitir que analistas expandam gradualmente suas √°reas de atua√ß√£o com suporte adequado</li>
</ul>
</section>
</section>
<section id="pergunta-5-fichas-individuais-dos-top-15-analistas" class="level2">
<h2 class="anchored" data-anchor-id="pergunta-5-fichas-individuais-dos-top-15-analistas">7. Pergunta 5: Fichas Individuais dos Top 15 Analistas</h2>
<p>An√°lise detalhada dos 15 analistas com maior volume de projetos</p>
<section id="pergunta-5" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-5">Pergunta 5</h3>
<div id="a849ed83" class="cell" data-execution_count="35">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_analistas_parecerista_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Resumo dos Top 15 Analistas:
    analista_id  total_projetos  taxa_aprovacao_do  taxa_aprovacao_parecer  \
0     301040479             628               59.7                    64.5   
1     301010505             565               69.4                    41.4   
2     300713489             534               64.6                    24.2   
3     108293000             438               65.1                    50.5   
4     300603544             384               53.6                     4.7   
5     301241624             367               27.8                    24.5   
6     301043768             361               80.1                    78.7   
7     116768062             347               66.0                    59.4   
8     300788615             346               76.0                    45.4   
9     301064200             306               59.5                    32.4   
10    300869814             291               63.9                    48.1   
11    300850244             283               58.3                    56.2   
12    301043769             270               83.0                    77.4   
13    300869864             263               97.3                    93.2   
14    121916780             262               72.5                    48.1   

    taxa_concordancia  num_areas  
0                88.8          5  
1                58.9         15  
2                37.4          5  
3                77.5          3  
4                 8.7          8  
5                73.5          6  
6                97.6          5  
7                87.3          8  
8                58.6          3  
9                54.4          2  
10               74.2          3  
11               89.1          3  
12               87.9          5  
13               95.7          4  
14               65.3          8  </code></pre>
</div>
</div>
</section>
<section id="an√°lise-e-insights-da-pergunta-5-com-base-na-imagem" class="level3">
<h3 class="anchored" data-anchor-id="an√°lise-e-insights-da-pergunta-5-com-base-na-imagem">An√°lise e Insights da Pergunta 5 (com base na imagem)</h3>
<p><strong>O que foi investigado:</strong></p>
<p>As fichas de desempenho visual acima consolidam as m√©tricas-chave (volume, taxas de aprova√ß√£o, concord√¢ncia e dispers√£o de √°reas) para os 15 analistas com maior volume de projetos. O objetivo √© transformar os dados em um perfil individualizado, facilitando a identifica√ß√£o de padr√µes e comportamentos at√≠picos (<em>outliers</em>).</p>
<p><strong>Principais Descobertas Visuais:</strong></p>
<p>A disposi√ß√£o em formato de ‚Äúcards‚Äù torna a compara√ß√£o entre os analistas imediata e intuitiva, destacando a heterogeneidade do grupo:</p>
<ul>
<li><p><strong>O Perfil Generalista:</strong> A ficha do analista <strong>ID 301010505</strong> (canto superior, centro) salta aos olhos pelo seu ‚ÄúN√∫mero de √Åreas: 15‚Äù, o maior de todos. Este card visualiza claramente o perfil de um analista generalista, com uma taxa de concord√¢ncia de apenas <strong>58.9%</strong>, sugerindo que a amplitude de sua atua√ß√£o pode estar impactando o alinhamento de suas decis√µes.</p></li>
<li><p><strong>O Desalinhamento Cr√≠tico:</strong> O caso mais preocupante √© visualizado na ficha do analista <strong>ID 300603544</strong> (segunda linha, centro). O n√∫mero ‚ÄúTaxa Concord√¢ncia: 8.7%‚Äù √© um forte alerta visual. Ele indica que, apesar de analisar um grande volume de projetos (384), suas decis√µes de aprova√ß√£o s√£o quase sistematicamente revertidas pelo parecerista, apontando para um desalinhamento fundamental de crit√©rios.</p></li>
<li><p><strong>O Benchmark de Consist√™ncia:</strong> Em forte contraste, a ficha do analista <strong>ID 300869864</strong> (pen√∫ltima linha, centro) funciona como um modelo de refer√™ncia. Os valores de ‚ÄúTaxa Aprova√ß√£o DO: 97.3%‚Äù e ‚ÄúTaxa Concord√¢ncia: 95.7%‚Äù mostram um alinhamento quase perfeito, representando um padr√£o de alta produtividade e consist√™ncia com a fase de parecer.</p></li>
<li><p><strong>O Perfil Rigoroso:</strong> A ficha do <strong>ID 301241624</strong> (segunda linha, √† esquerda) ilustra o perfil do analista mais rigoroso, com uma ‚ÄúTaxa Aprova√ß√£o DO‚Äù de apenas <strong>27.8%</strong>. A visualiza√ß√£o conjunta com a ‚ÄúTaxa Concord√¢ncia‚Äù de <strong>73.5%</strong> permite inferir que, embora aprove poucos projetos, suas recomenda√ß√µes s√£o, em geral, bem fundamentadas e mantidas.</p></li>
</ul>
<p><strong>Insights e Implica√ß√µes Pr√°ticas:</strong></p>
<p>A visualiza√ß√£o em formato de ‚Äòficha‚Äô transforma uma tabela de dados em uma ferramenta de gest√£o de desempenho muito mais eficaz. Para um gestor, √© poss√≠vel identificar com um r√°pido olhar os perfis que necessitam de aten√ß√£o, como os que apresentam baixa concord√¢ncia ou dispers√£o excessiva de √°reas. Da mesma forma, os perfis de alta consist√™ncia podem ser estudados para disseminar boas pr√°ticas. Esta abordagem visual √© fundamental para iniciar di√°logos focados, calibrar crit√©rios e otimizar o processo de avalia√ß√£o de forma mais √°gil e intuitiva.</p>
</section>
</section>
<section id="pergunta-6-modelo-preditivo-de-aprova√ß√£o-no-parecer" class="level2">
<h2 class="anchored" data-anchor-id="pergunta-6-modelo-preditivo-de-aprova√ß√£o-no-parecer">8. Pergunta 6: Modelo Preditivo de Aprova√ß√£o no Parecer</h2>
<p>An√°lise complexa: probabilidade de aprova√ß√£o baseada em caracter√≠sticas do projeto e analista</p>
<section id="pergunta-6---prepara√ß√£o-dos-dados" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-6---prepara√ß√£o-dos-dados">Pergunta 6 - Prepara√ß√£o dos dados</h3>
<div id="36b10ac1" class="cell" data-execution_count="36">
<div class="cell-output cell-output-stdout">
<pre><code>Preparando dados para o modelo preditivo...
Projetos v√°lidos para modelagem: 13,196</code></pre>
</div>
</div>
</section>
<section id="pergunta-6---feature-engineering" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-6---feature-engineering">Pergunta 6 - Feature Engineering</h3>
<div id="9d52d1d3" class="cell" data-execution_count="37">
<div class="cell-output cell-output-stdout">
<pre><code>Criando features TF-IDF...
Criando features categ√≥ricas...
Shape das features: (13196, 104)
Distribui√ß√£o do target: aprovado_parecer
0    0.553956
1    0.446044
Name: proportion, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="pergunta-6---treinamento-do-modelo" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-6---treinamento-do-modelo">Pergunta 6 - Treinamento do modelo</h3>
<div id="2770c51a" class="cell" data-execution_count="38">
<div class="cell-output cell-output-stdout">
<pre><code>
Treinando modelo Random Forest...

Performance do Modelo:
              precision    recall  f1-score   support

           0       0.85      0.77      0.81      1462
           1       0.75      0.83      0.79      1178

    accuracy                           0.80      2640
   macro avg       0.80      0.80      0.80      2640
weighted avg       0.81      0.80      0.80      2640


ROC-AUC m√©dio (cross-validation): 0.831 (+/- 0.021)</code></pre>
</div>
</div>
</section>
<section id="pergunta-6---an√°lise-de-import√¢ncia-das-features" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-6---an√°lise-de-import√¢ncia-das-features">Pergunta 6 - An√°lise de import√¢ncia das features</h3>
<div id="ed1776a3" class="cell" data-execution_count="39">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analise_analistas_parecerista_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Top 10 Palavras/Bigramas Mais Importantes:
- plataforma: 0.0401
- integra√ß√£o: 0.0369
- dados: 0.0292
- de dados: 0.0275
- em: 0.0242
- informa√ß√µes: 0.0235
- 2021: 0.0176
- de: 0.0152
- processos: 0.0109
- as: 0.0106</code></pre>
</div>
</div>
</section>
<section id="pergunta-6---an√°lise-de-cen√°rios" class="level3">
<h3 class="anchored" data-anchor-id="pergunta-6---an√°lise-de-cen√°rios">Pergunta 6 - An√°lise de cen√°rios</h3>
<div id="3a9ee659" class="cell" data-execution_count="40">
<div class="cell-output cell-output-stdout">
<pre><code>
================================================================================
AN√ÅLISE DE CEN√ÅRIOS - Probabilidade de Aprova√ß√£o no Parecer
================================================================================

Cen√°rio 1 - Perfil de Alta Aprova√ß√£o:
  √Årea: Outros
  Analista: ID_301040479
  Palavras-chave t√©cnicas: plataforma integra√ß√£o dados de dados em
  N√∫mero de palavras-chave: 5
  ‚Üí Probabilidade de Aprova√ß√£o: 32.6%

Cen√°rio 2 - Perfil de Baixa Aprova√ß√£o:
  √Årea: Software
  Analista: ID_300713489
  Palavras-chave t√©cnicas: projeto simples b√°sico
  N√∫mero de palavras-chave: 1
  ‚Üí Probabilidade de Aprova√ß√£o: 12.8%

Cen√°rio 3 - Mesmo Projeto, Diferentes Analistas:
  √Årea: Outros
  Palavras: plataforma integra√ß√£o dados de dados em
  N√∫mero de palavras-chave: 5
  - Analista ID_301040479 (taxa hist√≥rica: 59.7%): 32.6%
  - Analista ID_301010505 (taxa hist√≥rica: 69.4%): 34.8%
  - Analista ID_300713489 (taxa hist√≥rica: 64.6%): 31.1%
  - Analista ID_108293000 (taxa hist√≥rica: 65.1%): 32.0%
  - Analista ID_300603544 (taxa hist√≥rica: 53.6%): 23.7%</code></pre>
</div>
</div>
</section>
</section>
<section id="an√°lise-e-insights-da-pergunta-6-modelo-preditivo-de-aprova√ß√£o-no-parecer" class="level2">
<h2 class="anchored" data-anchor-id="an√°lise-e-insights-da-pergunta-6-modelo-preditivo-de-aprova√ß√£o-no-parecer">An√°lise e Insights da Pergunta 6: Modelo Preditivo de Aprova√ß√£o no Parecer</h2>
<section id="o-que-foi-investigado" class="level3">
<h3 class="anchored" data-anchor-id="o-que-foi-investigado">O que foi investigado:</h3>
<p>Foi desenvolvido um modelo de Machine Learning (Random Forest) para prever a probabilidade de aprova√ß√£o de projetos na fase de Parecer, utilizando caracter√≠sticas textuais (TF-IDF), informa√ß√µes estruturais (√°rea, analista) e m√©tricas hist√≥ricas. O modelo busca identificar quais fatores mais influenciam a decis√£o final e quantificar o impacto de diferentes vari√°veis na probabilidade de aprova√ß√£o.</p>
</section>
<section id="principais-descobertas-visuais" class="level3">
<h3 class="anchored" data-anchor-id="principais-descobertas-visuais">Principais Descobertas Visuais:</h3>
<section id="hierarquia-de-import√¢ncia-das-features-gr√°fico-√†-esquerda" class="level4">
<h4 class="anchored" data-anchor-id="hierarquia-de-import√¢ncia-das-features-gr√°fico-√†-esquerda">1. <strong>Hierarquia de Import√¢ncia das Features (Gr√°fico √† esquerda):</strong></h4>
<p>O gr√°fico de barras horizontais revela uma hierarquia clara de influ√™ncia: - <strong>Taxa hist√≥rica do analista</strong> domina com 49.7% da import√¢ncia relativa, confirmando que o comportamento hist√≥rico √© o preditor mais forte - <strong>√Årea do projeto</strong> contribui com 38.8%, indicando forte especializa√ß√£o setorial nas decis√µes - <strong>Caracter√≠sticas textuais</strong> (termos TF-IDF) ocupam as posi√ß√µes seguintes, com destaque para ‚Äúplataforma‚Äù (0.0401), ‚Äúintegra√ß√£o‚Äù (0.0369) e ‚Äúdados‚Äù (0.0292)</p>
</section>
<section id="distribui√ß√£o-de-import√¢ncia-das-features-estruturais-gr√°fico-√†-direita" class="level4">
<h4 class="anchored" data-anchor-id="distribui√ß√£o-de-import√¢ncia-das-features-estruturais-gr√°fico-√†-direita">2. <strong>Distribui√ß√£o de Import√¢ncia das Features Estruturais (Gr√°fico √† direita):</strong></h4>
<p>O gr√°fico de pizza decomp√µe a import√¢ncia relativa das 4 features n√£o-textuais: - <strong>Taxa hist√≥rica do analista</strong>: 49.7% - O fator individual mais determinante - <strong>√Årea encoded</strong>: 38.8% - Segundo fator mais importante, refletindo especializa√ß√£o setorial - <strong>Analista encoded</strong>: 9.2% - Efeito individual do analista al√©m de sua taxa hist√≥rica - <strong>N√∫mero de palavras-chave</strong>: 2.3% - Impacto marginal da quantidade de keywords</p>
</section>
</section>
<section id="m√©tricas-de-performance-do-modelo" class="level3">
<h3 class="anchored" data-anchor-id="m√©tricas-de-performance-do-modelo">M√©tricas de Performance do Modelo:</h3>
<ul>
<li><strong>ROC-AUC</strong>: 0.831 (¬±0.021) - Excelente capacidade discriminativa</li>
<li><strong>Acur√°cia</strong>: 80% - 4 em cada 5 previs√µes corretas</li>
<li><strong>Recall classe positiva</strong>: 83% - Alta sensibilidade para projetos aprovados</li>
<li><strong>Precision classe negativa</strong>: 85% - Alta especificidade para projetos reprovados</li>
</ul>
</section>
<section id="an√°lise-do-vocabul√°rio-preditivo" class="level3">
<h3 class="anchored" data-anchor-id="an√°lise-do-vocabul√°rio-preditivo">An√°lise do Vocabul√°rio Preditivo:</h3>
<p>Os termos mais importantes revelam padr√µes lingu√≠sticos associados ao sucesso: 1. <strong>‚Äúplataforma‚Äù</strong> (0.0401) - Sugere solu√ß√µes tecnol√≥gicas integradas 2. <strong>‚Äúintegra√ß√£o‚Äù</strong> (0.0369) - Indica complexidade e valor agregado 3. <strong>‚Äúdados‚Äù</strong> (0.0292) - Reflete foco em transforma√ß√£o digital 4. <strong>‚Äúinforma√ß√µes‚Äù</strong> (0.0235) - Complementa o tema de gest√£o de dados 5. <strong>‚Äú2021‚Äù</strong> (0.0176) - Poss√≠vel indicador de projetos recentes/atualizados</p>
</section>
<section id="an√°lise-de-cen√°rios-preditivos" class="level3">
<h3 class="anchored" data-anchor-id="an√°lise-de-cen√°rios-preditivos">An√°lise de Cen√°rios Preditivos:</h3>
<section id="cen√°rio-1---perfil-teoricamente-favor√°vel" class="level4">
<h4 class="anchored" data-anchor-id="cen√°rio-1---perfil-teoricamente-favor√°vel"><strong>Cen√°rio 1 - Perfil Teoricamente Favor√°vel:</strong></h4>
<ul>
<li>√Årea: ‚ÄúOutros‚Äù + Analista top performer + Vocabul√°rio otimizado</li>
<li><strong>Resultado surpreendente</strong>: Apenas 32.6% de probabilidade</li>
<li><strong>Insight</strong>: Mesmo com condi√ß√µes ‚Äúideais‚Äù, o modelo √© conservador, sugerindo que fatores n√£o capturados t√™m peso significativo</li>
</ul>
</section>
<section id="cen√°rio-2---perfil-desfavor√°vel" class="level4">
<h4 class="anchored" data-anchor-id="cen√°rio-2---perfil-desfavor√°vel"><strong>Cen√°rio 2 - Perfil Desfavor√°vel:</strong></h4>
<ul>
<li>√Årea: ‚ÄúSoftware‚Äù + Analista com hist√≥rico misto + Texto gen√©rico</li>
<li><strong>Resultado</strong>: 12.8% de probabilidade</li>
<li><strong>Insight</strong>: Confirma penaliza√ß√£o forte para projetos com descri√ß√µes vagas</li>
</ul>
</section>
<section id="cen√°rio-3---varia√ß√£o-por-analista" class="level4">
<h4 class="anchored" data-anchor-id="cen√°rio-3---varia√ß√£o-por-analista"><strong>Cen√°rio 3 - Varia√ß√£o por Analista:</strong></h4>
<ul>
<li>Mesmo projeto testado com 5 analistas diferentes</li>
<li><strong>Varia√ß√£o</strong>: 23.7% a 34.8% (amplitude de 11.1 pontos percentuais)</li>
<li><strong>Insight cr√≠tico</strong>: A identidade do analista pode alterar a probabilidade em at√© 46% (de 23.7% para 34.8%)</li>
</ul>
</section>
</section>
<section id="implica√ß√µes-pr√°ticas-e-recomenda√ß√µes" class="level3">
<h3 class="anchored" data-anchor-id="implica√ß√µes-pr√°ticas-e-recomenda√ß√µes">Implica√ß√µes Pr√°ticas e Recomenda√ß√µes:</h3>
<section id="para-gestores-do-programa" class="level4">
<h4 class="anchored" data-anchor-id="para-gestores-do-programa"><strong>1. Para Gestores do Programa:</strong></h4>
<ul>
<li><strong>Sistema de Apoio √† Decis√£o</strong>: Implementar o modelo como ferramenta de triagem pr√©via</li>
<li><strong>Calibra√ß√£o de Analistas</strong>: Usar as previs√µes para identificar e corrigir vieses individuais</li>
<li><strong>Aloca√ß√£o Inteligente</strong>: Direcionar projetos para analistas com perfil adequado</li>
</ul>
</section>
<section id="para-empresas-proponentes" class="level4">
<h4 class="anchored" data-anchor-id="para-empresas-proponentes"><strong>2. Para Empresas Proponentes:</strong></h4>
<ul>
<li><strong>Otimiza√ß√£o Textual</strong>: Incorporar vocabul√°rio t√©cnico espec√≠fico (‚Äúplataforma‚Äù, ‚Äúintegra√ß√£o‚Äù, ‚Äúdados‚Äù)</li>
<li><strong>Sele√ß√£o de √Årea</strong>: Considerar o impacto da classifica√ß√£o setorial na probabilidade</li>
<li><strong>Detalhamento T√©cnico</strong>: Evitar descri√ß√µes gen√©ricas; quanto mais espec√≠fico, melhor</li>
</ul>
</section>
<section id="para-melhoria-do-modelo" class="level4">
<h4 class="anchored" data-anchor-id="para-melhoria-do-modelo"><strong>3. Para Melhoria do Modelo:</strong></h4>
<ul>
<li><strong>Features Adicionais</strong>: Incorporar m√©tricas financeiras, hist√≥rico da empresa, complexidade t√©cnica</li>
<li><strong>Ensemble Methods</strong>: Combinar com outros algoritmos para aumentar robustez</li>
<li><strong>An√°lise Temporal</strong>: Incluir tend√™ncias e sazonalidades nas aprova√ß√µes</li>
</ul>
</section>
</section>
<section id="limita√ß√µes-e-considera√ß√µes" class="level3">
<h3 class="anchored" data-anchor-id="limita√ß√µes-e-considera√ß√µes">Limita√ß√µes e Considera√ß√µes:</h3>
<ol type="1">
<li><strong>Probabilidades Conservadoras</strong>: Mesmo cen√°rios favor√°veis resultam em probabilidades &lt;35%, sugerindo:
<ul>
<li>Desequil√≠brio nos dados de treino</li>
<li>Fatores ocultos n√£o capturados</li>
<li>Necessidade de recalibra√ß√£o do modelo</li>
</ul></li>
<li><strong>Depend√™ncia do Analista</strong>: A taxa hist√≥rica domina com ~50% da import√¢ncia, indicando:
<ul>
<li>Risco de perpetuar vieses existentes</li>
<li>Necessidade de estrat√©gias de ‚Äúdebiasing‚Äù</li>
<li>Oportunidade para padroniza√ß√£o de crit√©rios</li>
</ul></li>
<li><strong>Vocabul√°rio Dominante</strong>: Termos gen√©ricos (‚Äúdados‚Äù, ‚Äúem‚Äù, ‚Äúde‚Äù) no top 10 sugerem:
<ul>
<li>Necessidade de pr√©-processamento mais sofisticado</li>
<li>Potencial para n-gramas de ordem superior</li>
<li>An√°lise sem√¢ntica al√©m de frequ√™ncia</li>
</ul></li>
</ol>
</section>
<section id="conclus√£o" class="level3">
<h3 class="anchored" data-anchor-id="conclus√£o">Conclus√£o:</h3>
<p>O modelo demonstra viabilidade t√©cnica robusta (ROC-AUC 0.831) para predi√ß√£o automatizada, mas revela depend√™ncia preocupante de fatores hist√≥ricos e individuais. A domin√¢ncia da ‚Äútaxa hist√≥rica do analista‚Äù (49.7%) sobre caracter√≠sticas intr√≠nsecas do projeto sugere que o sistema atual pode estar perpetuando padr√µes passados em vez de avaliar objetivamente o m√©rito t√©cnico. A implementa√ß√£o pr√°tica deve focar em usar o modelo como ferramenta de apoio e alerta, n√£o substitui√ß√£o da an√°lise humana, priorizando a identifica√ß√£o e corre√ß√£o de vieses sist√™micos.</p>
</section>
</section>
<section id="conclus√µes-e-insights-principais" class="level2">
<h2 class="anchored" data-anchor-id="conclus√µes-e-insights-principais">9. Conclus√µes e Insights Principais</h2>
<div id="fc6cecdb" class="cell" data-execution_count="41">
<div class="cell-output cell-output-stdout">
<pre><code>
================================================================================
PRINCIPAIS CONCLUS√ïES DA AN√ÅLISE
================================================================================

1. TAXA DE APROVA√á√ÉO POR ANALISTA:
   - Taxa m√©dia de aprova√ß√£o (DO): 62.0%
   - Varia√ß√£o: 0.0% a 100.0%
   - Desvio padr√£o: 27.1%

2. CONCORD√ÇNCIA DO ‚Üí PARECER:
   - Taxa m√©dia de concord√¢ncia: 66.9%
   - Analistas com concord√¢ncia &lt; 50%: 19

3. REVERS√ïES DE DECIS√ÉO:
   - Taxa m√©dia de revers√£o (N√£o Recom ‚Üí Recom): 4.8%
   - √Åreas com maior revers√£o: Mec√¢nica, Transporte, Constru√ß√£o Civil

4. DISPERS√ÉO DE √ÅREAS:
   - M√©dia de √°reas por analista: 4.6
   - M√°ximo de √°reas atendidas: 15
   - Analistas com &gt;10 √°reas: 1

5. MODELO PREDITIVO:
   - Acur√°cia do modelo: 80.0%
   - ROC-AUC: 0.831
   - Features mais importantes: Taxa hist√≥rica do analista, √Årea do projeto, Palavras t√©cnicas

6. RECOMENDA√á√ïES:
   - Implementar especializa√ß√£o por √°rea para reduzir dispers√£o
   - Revisar crit√©rios de avalia√ß√£o para aumentar concord√¢ncia DO-Parecer
   - Investigar √°reas com alta taxa de revers√£o para padronizar crit√©rios
   - Considerar balanceamento de carga entre analistas

‚úÖ Resultados salvos em 'analise_analistas_parecerista_resultados.xlsx'
‚úÖ An√°lise conclu√≠da!</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>